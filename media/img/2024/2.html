<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Collection</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root { 
        --bg: #050505; --text: #ffffff; --header-bg: #0a0a0a; --card-bg: #1a1a1a;
        --border: rgba(255,255,255,0.1); --accent: #8b5cf6; --pill-bg: #151515; --success: #22c55e;
        --lb-bg: rgba(0,0,0,0.98); --lb-btn-bg: rgba(255,255,255,0.1); --lb-btn-text: #ffffff;
    }
    body.light-mode {
        --bg: #f3f4f6; --text: #1f2937; --header-bg: #ffffff; --card-bg: #ffffff;
        --border: rgba(0,0,0,0.1); --pill-bg: #e5e7eb;
        --lb-bg: #f9fafb; /* Light theme expand background */
        --lb-btn-bg: rgba(0,0,0,0.05); --lb-btn-text: #1f2937;
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { background: var(--bg); color: var(--text); font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; padding-top: 150px; transition: background 0.3s, color 0.3s; }

    /* --- FLOATING PILL HEADER --- */
    .header-container { position: fixed; top: 15px; left: 0; width: 100%; display: flex; justify-content: center; z-index: 1000; padding: 0 15px; }
    .header { 
        width: 100%; max-width: 500px; background: var(--header-bg); 
        border: 1px solid var(--border); border-radius: 40px; padding: 15px 20px; 
        display: grid; grid-template-columns: 50px 1fr 80px; align-items: center;
        box-shadow: 0 10px 40px rgba(0,0,0,0.4);
    }
    .nav-left { display: flex; justify-content: flex-start; }
    .round-btn { width: 40px; height: 40px; background: var(--pill-bg); color: var(--text); border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 16px; transition: 0.2s; }
    .page-title { font-weight: 800; font-size: 14px; color: var(--text); line-height: 1.2; text-transform: uppercase; text-align: center; padding: 0 10px; word-wrap: break-word; }
    .nav-right { display: flex; justify-content: flex-end; gap: 8px; }
    .icon-btn { background: transparent; border: none; color: var(--text); font-size: 18px; cursor: pointer; padding: 8px; border-radius: 50%; transition: 0.2s; opacity: 0.8; }

    /* --- MASONRY GRID --- */
    .gallery-grid { column-count: 2; column-gap: 15px; max-width: 1400px; margin: 0 auto; }
    @media (min-width: 768px) { .gallery-grid { column-count: 4; } }
    .grid-item { break-inside: avoid; margin-bottom: 15px; border-radius: 15px; overflow: hidden; background: var(--card-bg); border: 1px solid var(--border); cursor: pointer; }
    .grid-item img { width: 100%; height: auto; display: block; transition: 0.3s; }

    /* --- LIGHTBOX (THEME RESPONSIVE) --- */
    .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--lb-bg); z-index: 9999; display: none; flex-direction: column; transition: background 0.3s; }
    .lightbox.active { display: flex; animation: fadeIn 0.2s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .lb-header { padding: 20px; display: flex; justify-content: flex-end; position: absolute; top: 0; width: 100%; z-index: 10001; }
    .lb-btn { color: var(--lb-btn-text); font-size: 22px; cursor: pointer; background: var(--lb-btn-bg); border: none; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }

    .lb-body { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; padding: 40px; padding-bottom: 120px; }
    .lb-img { 
        max-width: 100%; max-height: 100%; 
        object-fit: contain; border-radius: 12px; 
        box-shadow: 0 30px 60px rgba(0,0,0,0.3); 
        user-select: none;
    }

    .lb-footer { height: 100px; width: 100%; position: absolute; bottom: 0; display: flex; align-items: center; justify-content: center; z-index: 10001; padding-bottom: 15px; }
    .lb-thumbs { display: flex; gap: 12px; overflow-x: auto; padding: 0 20px; scrollbar-width: none; max-width: 100%; }
    .lb-thumb { width: 50px; height: 50px; border-radius: 10px; object-fit: cover; opacity: 0.4; border: 2px solid transparent; flex-shrink: 0; transition: 0.2s; cursor: pointer; }
    .lb-thumb.active { opacity: 1; border-color: var(--accent); transform: scale(1.15); }

    .nav-arrow { position: absolute; top: 50%; transform: translateY(-50%); font-size: 35px; color: var(--lb-btn-text); opacity: 0.4; cursor: pointer; padding: 20px; z-index: 10002; transition: 0.2s; display: none; }
    .nav-arrow:hover { opacity: 1; }
    .nav-left { left: 10px; } .nav-right { right: 10px; }
    @media(min-width: 1024px) { .nav-arrow { display: block; } }

    /* MODAL */
    .share-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); background: var(--header-bg); border: 1px solid var(--border); padding: 25px 40px; border-radius: 20px; display: flex; flex-direction: column; align-items: center; gap: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); z-index: 11000; opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(15px); text-align: center; }
    .share-modal.active { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: auto; }
    .modal-icon { width: 50px; height: 50px; background: rgba(34, 197, 94, 0.15); color: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; }
  </style>
</head>
<body>

<div class="header-container">
    <div class="header">
        <div class="nav-left"><a href="index.html" class="round-btn"><i class="fas fa-arrow-left"></i></a></div>
        <div class="page-title">[FOR CARAT] HAPPY SVT DAY ðŸª„ðŸ’Ž 9th Anniversary of Debut!</div>
        <div class="nav-right">
            <button class="icon-btn" onclick="toggleTheme()"><i class="fas fa-sun" id="themeIcon"></i></button>
            <button class="icon-btn" onclick="sharePage()"><i class="fas fa-share-nodes"></i></button>
        </div>
    </div>
</div>

<div class="gallery-grid" id="grid"></div>

<div class="lightbox" id="lightbox">
    <div class="lb-header"><button class="lb-btn" onclick="closeLightbox()"><i class="fas fa-times"></i></button></div>
    <div class="lb-body" id="lbBody">
        <div class="nav-arrow nav-left" onclick="prevImage()"><i class="fas fa-chevron-left"></i></div>
        <img src="" class="lb-img" id="lbImage">
        <div class="nav-arrow nav-right" onclick="nextImage()"><i class="fas fa-chevron-right"></i></div>
    </div>
    <div class="lb-footer"><div class="lb-thumbs" id="lbThumbs"></div></div>
</div>

<div id="shareModal" class="share-modal">
    <div class="modal-icon"><i class="fas fa-check"></i></div>
    <h3 style="color:var(--text); margin:0;">Link Copied!</h3>
</div>

<script>
    const themeIcon = document.getElementById('themeIcon');
    function initTheme() {
        if (localStorage.getItem('zoneTheme') === 'light') {
            document.body.classList.add('light-mode');
            themeIcon.className = 'fas fa-sun';
        } else {
            themeIcon.className = 'fas fa-moon';
        }
    }
    function toggleTheme() {
        document.body.classList.toggle('light-mode');
        const isLight = document.body.classList.contains('light-mode');
        localStorage.setItem('zoneTheme', isLight ? 'light' : 'dark');
        themeIcon.className = isLight ? 'fas fa-sun' : 'fas fa-moon';
    }
    initTheme();

    const images = [
        { src: "https://res.cloudinary.com/dp6x9xmku/image/upload/v1771133030/weverse_4-289162000_ue6xzu.jpg" },
        { src: "https://res.cloudinary.com/dp6x9xmku/image/upload/v1771133029/weverse_1-282149256_l37agw.jpg" }
    ];

    const grid = document.getElementById('grid');
    const lbImage = document.getElementById('lbImage');
    const lbThumbs = document.getElementById('lbThumbs');
    const lightbox = document.getElementById('lightbox');
    let currentIndex = 0;

    images.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'grid-item';
        div.innerHTML = `<img src="${item.src}" loading="lazy">`;
        div.onclick = () => openLightbox(index);
        grid.appendChild(div);

        const thumb = document.createElement('img');
        thumb.src = item.src;
        thumb.className = 'lb-thumb';
        thumb.id = `thumb-${index}`;
        thumb.onclick = () => { currentIndex = index; updateLightbox(); };
        lbThumbs.appendChild(thumb);
    });

    function openLightbox(index) { currentIndex = index; updateLightbox(); lightbox.classList.add('active'); document.body.style.overflow = 'hidden'; }
    function closeLightbox() { lightbox.classList.remove('active'); document.body.style.overflow = 'auto'; }
    function updateLightbox() {
        if(currentIndex < 0) currentIndex = images.length - 1;
        if(currentIndex >= images.length) currentIndex = 0;
        lbImage.src = images[currentIndex].src;
        document.querySelectorAll('.lb-thumb').forEach(t => t.classList.remove('active'));
        const active = document.getElementById(`thumb-${currentIndex}`);
        active.classList.add('active');
        active.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    }
    function nextImage() { currentIndex++; updateLightbox(); }
    function prevImage() { currentIndex--; updateLightbox(); }
    
    document.addEventListener('keydown', (e) => {
        if(!lightbox.classList.contains('active')) return;
        if(e.key === 'ArrowRight') nextImage();
        if(e.key === 'ArrowLeft') prevImage();
        if(e.key === 'Escape') closeLightbox();
    });

    let ts = 0; let te = 0;
    const lbBody = document.getElementById('lbBody');
    lbBody.addEventListener('touchstart', e => { ts = e.changedTouches[0].screenX; }, {passive: true});
    lbBody.addEventListener('touchend', e => { te = e.changedTouches[0].screenX; if(te < ts - 50) nextImage(); if(te > ts + 50) prevImage(); }, {passive: true});

    function sharePage() {
        navigator.clipboard.writeText(window.location.href);
        const modal = document.getElementById('shareModal');
        modal.classList.add('active');
        setTimeout(() => modal.classList.remove('active'), 2000);
    }
</script>
</body>
</html>
